!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/router"),require("@angular/common"),require("@angular/platform-browser"),require("@angular/platform-browser/animations"),require("@angular/material"),require("@angular/flex-layout"),require("hammerjs"),require("rxjs/Rx")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/forms","@angular/router","@angular/common","@angular/platform-browser","@angular/platform-browser/animations","@angular/material","@angular/flex-layout","hammerjs","rxjs/Rx"],t):t(e.ngtable={},e.ng.core,e._angular_forms,e._angular_router,e._angular_common,e._angular_platformBrowser,e._angular_platformBrowser_animations,e._angular_material,e._angular_flexLayout,null,e.rxjs_Rx)}(this,function(e,t,r,n,o,a,i,u,s,c,l){"use strict";var g=function(){function e(e){this._table=e}return Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!0,configurable:!0}),e}(),p=function(){function e(e){this._table=e}return Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!0,configurable:!0}),e}(),f=function(){function e(e,t){this._table=e,this._params=t}return Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),e}(),b=function(){function e(e,t){this._table=e,this._result=t}return Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this._result},enumerable:!0,configurable:!0}),e}(),h=function(){function e(e,t,r){this._table=e,this._range=t,this._options=r}return Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e}(),_=function(){function e(e){this.activeRoute=e,this._rows=[],this._totalRows=0,this._page=1,this._totalPages=0,this._from=0,this._to=0,this._initialized=!1,this._queryPage="page",this.initEmitter=new t.EventEmitter,this.destroyEmitter=new t.EventEmitter,this.beforeConnectEmitter=new t.EventEmitter,this.afterConnectEmitter=new t.EventEmitter,this.rangeChangeEmitter=new t.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this;this.initEmitter.emit(new g(this)),this._querySubscriber=this.activeRoute.queryParams.debounceTime(10).subscribe(function(t){e._initialized=!0,e._page=t[e._queryPage]?+t[e._queryPage]:1,e.requestData()})},e.prototype.ngOnDestroy=function(){this._dataSourceSubscriber&&(this._dataSourceSubscriber.unsubscribe(),this._dataSourceSubscriber=null),this._querySubscriber.unsubscribe(),this.destroyEmitter.emit(new p(this))},Object.defineProperty(e.prototype,"dataSource",{set:function(e){var t=this;this._dataSource=e,this._dataSourceSubscriber&&this._dataSourceSubscriber.unsubscribe(),this._dataSourceSubscriber=this._dataSource.connection.subscribe(function(e){e&&(t._rows=e.data,t._totalRows=e.totalRows,t._totalPages=Math.ceil(t._totalRows/t._dataSource.range),t._page>t._totalPages&&(t._page=1),t._from=(t._page-1)*t._dataSource.range+1,t._to=t._from+t._dataSource.range-1,t._to>t._totalRows&&(t._to=t._totalRows),t.afterConnectEmitter.emit(new b(t,e)))})},enumerable:!0,configurable:!0}),e.prototype.requestData=function(){this._dataSource.loading||(this._dataSource.params.offset=(this._page-1)*this._dataSource.range,this.beforeConnectEmitter.emit(new f(this,this._dataSource.params)),this._dataSource.getData(this._dataSource.params))},Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryPage",{set:function(e){this._queryPage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this._page},set:function(e){this._dataSource.loading||(this._page=+e,this._page<1&&(this._page=1),this._page>this._totalPages&&(this._page=this._totalPages,this._page<1&&(this._page=1)),this.requestData())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalPages",{get:function(){return this._totalPages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalRows",{get:function(){return this._totalRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this._to},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._dataSource.range},set:function(e){this._dataSource.loading||(this._dataSource.range=+e,this.rangeChangeEmitter.emit(new h(this,this.range,this.rangeOptions)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeOptions",{get:function(){return this._dataSource.rangeOptions},set:function(e){this._dataSource.rangeOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return this._initialized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading",{get:function(){return this._dataSource.loading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this._totalRows},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){return this.page=this._page,this},e.prototype.prev=function(){return this._page--,this._page<1&&(this._page=1),this.page=this._page,this},e.prototype.next=function(){this._page++;var e=this.totalPages;return this._page>e&&(this._page=e),this.page=this._page,this},Object.defineProperty(e.prototype,"hasPrev",{get:function(){return this._page>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._page<this._totalPages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFirst",{get:function(){return 1==this._page},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLast",{get:function(){return this._page==this._totalPages},enumerable:!0,configurable:!0}),e}();_.decorators=[{type:t.Component,args:[{selector:"ng-table",template:"\n  <ng-content></ng-content>\n  ",styleUrls:["./table.component.scss"],host:{class:"ng-table"}}]}],_.ctorParameters=function(){return[{type:n.ActivatedRoute}]},_.propDecorators={initEmitter:[{type:t.Output,args:["init"]}],destroyEmitter:[{type:t.Output,args:["destroy"]}],beforeConnectEmitter:[{type:t.Output,args:["beforeConnect"]}],afterConnectEmitter:[{type:t.Output,args:["afterConnect"]}],rangeChangeEmitter:[{type:t.Output,args:["rangeChange"]}],dataSource:[{type:t.Input}],queryPage:[{type:t.Input}],page:[{type:t.Input}],range:[{type:t.Input}],rangeOptions:[{type:t.Input}]};var m=function(){function e(){}return e}();m.decorators=[{type:t.Component,args:[{selector:"ng-table-header-row",template:"\n  <ng-content></ng-content>\n  ",host:{class:"ng-table-header-row"}}]}],m.ctorParameters=function(){return[]};var y=function(){function e(){}return e}();y.decorators=[{type:t.Component,args:[{selector:"ng-table-row",template:"\n  <ng-content></ng-content>\n  ",host:{class:"ng-table-row"}}]}],y.ctorParameters=function(){return[]};var d=function(){function e(){}return e}();d.decorators=[{type:t.Component,args:[{selector:"ng-table-cell",template:"\n  <ng-content></ng-content>\n  ",host:{class:"ng-table-cell"}}]}],d.ctorParameters=function(){return[]};var P=function(){function e(){this._rangeVisible=!0}return Object.defineProperty(e.prototype,"ngTable",{set:function(e){this.table=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeVisible",{get:function(){return this._rangeVisible},set:function(e){this._rangeVisible=e},enumerable:!0,configurable:!0}),e.prototype.actionRange=function(e){this.table&&(this.table.range=+e.value)},e}();P.decorators=[{type:t.Component,args:[{selector:"ng-table-paginator",templateUrl:"./paginator.component.html",styleUrls:["./paginator.component.scss"],host:{class:"ng-table-paginator"}}]}],P.ctorParameters=function(){return[]},P.propDecorators={table:[{type:t.Input}],ngTable:[{type:t.Input}],rangeVisible:[{type:t.Input}]};var O=function(){function e(){this._range=null,this._rangeOptions=[5,10,20,50],this._params=null,this._loading=!1,this._dataChange=new l.BehaviorSubject(null)}return Object.defineProperty(e.prototype,"loading",{get:function(){return this._loading},enumerable:!0,configurable:!0}),e.prototype.getData=function(e){this._loading=!0,this.source(e)},e.prototype.updateData=function(e){this._loading=!1,this._dataChange.next(e)},Object.defineProperty(e.prototype,"connection",{get:function(){return this._dataChange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this._params},set:function(e){var t=null!=this._params;this._params=e,!this._loading&&t&&this.getData(this.params)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._range||10},set:function(e){var t=null!=this._range;this._range=e,!this._loading&&t&&this.getData(this.params)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeOptions",{get:function(){return this._rangeOptions},set:function(e){this._rangeOptions=e},enumerable:!0,configurable:!0}),e}(),w=function(){function e(e,t){this._totalRows=0,this._data=e,this._totalRows=t}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalRows",{get:function(){return this._totalRows},enumerable:!0,configurable:!0}),e.create=function(t,r){return new e(t,r)},e.singlePage=function(t,r){var n=[],o=0,a=t.params;return r.forEach(function(e){o>=a.offset&&o<a.offset+t.range&&n.push(e),o++}),new e(n,r.length)},e}(),j=[],S=function(){function e(){}return e}();S.decorators=[{type:t.NgModule,args:[{imports:[n.RouterModule.forRoot(j)],exports:[n.RouterModule]}]}],S.ctorParameters=function(){return[]};var v=function(){function e(){}return e}();v.decorators=[{type:t.NgModule,args:[{imports:[a.BrowserModule,i.BrowserAnimationsModule,o.CommonModule,r.FormsModule,s.FlexLayoutModule,u.MaterialModule,S],declarations:[_,m,y,d,P],providers:[],exports:[_,m,y,d,P]}]}],v.ctorParameters=function(){return[]},e.NgTableRoutingModule=S,e.NgTableModule=v,e.NgTableInitEvent=g,e.NgTableDestroyEvent=p,e.NgTableBeforeConnectEvent=f,e.NgTableAfterConnectEvent=b,e.NgTableRangeEvent=h,e.NgTableSource=O,e.NgTableSourceResult=w,e.NgTable=_,e.NgTableHeaderRow=m,e.NgTableRow=y,e.NgTableCell=d,e.NgTablePaginator=P,Object.defineProperty(e,"__esModule",{value:!0})});