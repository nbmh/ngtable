!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("hammerjs"),require("rxjs/Rx")):"function"==typeof define&&define.amd?define(["exports","@angular/common","@angular/core","@angular/forms","hammerjs","rxjs/Rx"],t):t(e.ngtable={},e._angular_common,e.ng.core,e._angular_forms,null,e.rxjs_Rx)}(this,function(e,t,n,r,a,o){"use strict";var i=function(){function e(e){this._table=e}return Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!0,configurable:!0}),e}(),s=function(){function e(e){this._table=e}return Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!0,configurable:!0}),e}(),l=function(){function e(e,t){this._table=e,this._params=t}return Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),e}(),u=function(){function e(e,t){this._table=e,this._result=t}return Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this._result},enumerable:!0,configurable:!0}),e}(),p=function(){function e(e,t,n){this._table=e,this._range=t,this._options=n}return Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e}(),g=function(){function e(e,t){this._source=e,this._result=t}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this._result},enumerable:!0,configurable:!0}),e}(),c=function(){function e(){this._rows=[],this._totalRows=0,this._page=1,this._totalPages=0,this._from=0,this._to=0,this._moreRange=10,this._initialized=!1,this._queryPage="page",this.initEmitter=new n.EventEmitter,this.destroyEmitter=new n.EventEmitter,this.beforeConnectEmitter=new n.EventEmitter,this.sourceUpdateEmitter=new n.EventEmitter,this.afterConnectEmitter=new n.EventEmitter,this.rangeChangeEmitter=new n.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.initEmitter.emit(new i(this)),this._initialized=!0,this._page=1,this.requestData()},e.prototype.ngOnDestroy=function(){this._dataSourceSubscriber&&(this._dataSourceSubscriber.unsubscribe(),this._dataSourceSubscriber=null),this.destroyEmitter.emit(new s(this))},Object.defineProperty(e.prototype,"dataSource",{set:function(e){var t=this;this._dataSource=e,this._dataSourceSubscriber&&this._dataSourceSubscriber.unsubscribe(),this._dataSource.sourceUpdate.subscribe(function(e){t.sourceUpdateEmitter.emit(e)}),this._dataSourceSubscriber=this._dataSource.connection.subscribe(function(e){if(e){t.calculate(e.data,e.totalRows);var n=new u(t,e);t.afterConnectEmitter.emit(n),t._dataSource.afterConnect.emit(n)}})},enumerable:!0,configurable:!0}),e.prototype.calculate=function(e,t){this._rows=e,this._totalRows=t,this._totalPages=Math.ceil(this._totalRows/this._dataSource.range),this._page>this._totalPages&&(this._page=1),this._from=(this._page-1)*this._dataSource.range+1,this._to=this._from+this._dataSource.range-1,this._to>this._totalRows&&(this._to=this._totalRows)},e.prototype.requestData=function(){if(!this._dataSource.loading){this._dataSource.params.offset=(this._page-1)*this._dataSource.range;var e=new l(this,this._dataSource.params);this.beforeConnectEmitter.emit(e),this._dataSource.beforeConnect.emit(e),this._dataSource.getData(this._dataSource.params)}},e.prototype.removeRow=function(e){var t=this._rows.indexOf(e);return t>-1&&this._rows.splice(t,1),this.calculate(this._rows,this.totalRows-1),this},e.prototype.updateRow=function(e){var t=this._rows.indexOf(e);return t>-1&&this._rows.splice(t,1,e),this},e.prototype.addRow=function(e){return this._rows.push(e),this.calculate(this._rows,this.totalRows+1),this},Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryPage",{set:function(e){this._queryPage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this._page},set:function(e){this._dataSource.loading||(this._page=+e,this._page<1&&(this._page=1),this._page>this._totalPages&&(this._page=this._totalPages,this._page<1&&(this._page=1)),this.requestData())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalPages",{get:function(){return this._totalPages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalRows",{get:function(){return this._totalRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this._to},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._dataSource.range},set:function(e){this._dataSource.loading||(this._dataSource.range=+e,this.rangeChangeEmitter.emit(new p(this,this.range,this.rangeOptions)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moreRange",{get:function(){return this._moreRange},set:function(e){this._moreRange=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeOptions",{get:function(){return this._dataSource.rangeOptions},set:function(e){this._dataSource.rangeOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return this._initialized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading",{get:function(){return this._dataSource.loading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this._totalRows},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){return this.page=this._page,this},e.prototype.more=function(){return this._dataSource.loading||(this._page=1,this.range=this.range+this._moreRange,this.requestData()),this},e.prototype.prev=function(){return this._page--,this._page<1&&(this._page=1),this.page=this._page,this},e.prototype.next=function(){this._page++;var e=this.totalPages;return this._page>e&&(this._page=e),this.page=this._page,this},Object.defineProperty(e.prototype,"hasPrev",{get:function(){return this._page>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._page<this._totalPages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFirst",{get:function(){return 1==this._page},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLast",{get:function(){return this._page==this._totalPages},enumerable:!0,configurable:!0}),e}();c.decorators=[{type:n.Component,args:[{selector:"ng-table",template:"\n  <ng-content></ng-content>\n  ",styles:["\n:host(.ng-table) {\n  background: #fff;\n  overflow: auto;\n  display: table;\n  width: 100%;\n}\n\n:host(.ng-table) /deep/ .ng-table-header-row,\n:host(.ng-table) /deep/ .ng-table-row {\n  display: table-row;\n}\n\n:host(.ng-table) /deep/ .ng-table-header-cell,\n:host(.ng-table) /deep/ .ng-table-cell {\n  border-bottom-color: rgba(0, 0, 0, .12);\n  border-bottom-width: 1px;\n  border-bottom-style: solid;\n  padding: 12px;\n}\n\n:host(.ng-table.ng-table-condensed) /deep/ .ng-table-header-cell,\n:host(.ng-table.ng-table-condensed) /deep/ .ng-table-cell {\n  padding-top: 6px;\n  padding-bottom: 6px;\n}\n\n:host(.ng-table) /deep/ .ng-table-header-cell {\n  font-size: 12px;\n  font-weight: 500;\n  color: rgba(0, 0, 0, .54);\n  display: table-cell;\n  white-space: nowrap;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n:host(.ng-table) /deep/ .ng-table-cell {\n  font-size: 14px;\n  color: rgba(0,0,0,.87);\n  display: table-cell;\n}\n\n:host(.ng-table) /deep/ .ng-table-icon {\n  width: 40px;\n  height: 40px;\n}\n\n:host(.ng-table-striped) /deep/ .ng-table-row:nth-of-type(odd) {\n  background-color: #f9f9f9;\n}\n\n:host(.ng-table-striped.ng-table-hover) /deep/ .ng-table-row:hover {\n  background-color: #f5f5f5;\n}\n  "],host:{class:"ng-table"}}]}],c.ctorParameters=function(){return[]},c.propDecorators={initEmitter:[{type:n.Output,args:["init"]}],destroyEmitter:[{type:n.Output,args:["destroy"]}],beforeConnectEmitter:[{type:n.Output,args:["beforeConnect"]}],sourceUpdateEmitter:[{type:n.Output,args:["sourceUpdate"]}],afterConnectEmitter:[{type:n.Output,args:["afterConnect"]}],rangeChangeEmitter:[{type:n.Output,args:["rangeChange"]}],dataSource:[{type:n.Input}],queryPage:[{type:n.Input}],page:[{type:n.Input}],range:[{type:n.Input}],moreRange:[{type:n.Input}],rangeOptions:[{type:n.Input}]};var b=function(){function e(e){this.parent=e}return e}();b.decorators=[{type:n.Component,args:[{selector:"ng-table-row",template:"\n  <ng-content></ng-content>\n  ",host:{class:"ng-table-row"}}]}],b.ctorParameters=function(){return[{type:c}]};var f=function(){function e(e){this.parent=e}return e}();f.decorators=[{type:n.Component,args:[{selector:"ng-table-cell",template:"\n  <ng-content></ng-content>\n  ",host:{class:"ng-table-cell"}}]}],f.ctorParameters=function(){return[{type:b}]};var h=function(){function e(e){this.parent=e}return e}();h.decorators=[{type:n.Component,args:[{selector:"ng-table-header-row",template:"\n  <ng-content></ng-content>\n  ",host:{class:"ng-table-header-row"}}]}],h.ctorParameters=function(){return[{type:c}]};var d=function(){function e(e){this.parent=e}return e}();d.decorators=[{type:n.Component,args:[{selector:"ng-table-header-cell",template:"\n  <ng-content></ng-content>\n  ",host:{class:"ng-table-header-cell"}}]}],d.ctorParameters=function(){return[{type:h}]};var m=function(){function e(){this._rangeVisible=!0,this._label={items_per_page:"Items per page",page:"Page",of_page:"of",items:"Items",of_items:"of"}}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label=Object.assign({},this._label,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngTable",{set:function(e){this.table=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeVisible",{get:function(){return this._rangeVisible},set:function(e){this._rangeVisible=e},enumerable:!0,configurable:!0}),e.prototype.actionRange=function(e){this.table&&(this.table.range=+e.value)},e}();m.decorators=[{type:n.Component,args:[{selector:"ng-table-more",template:'\n    <button class="ng-table-more-button" *ngIf="table.rows.length<table.totalRows" (click)="table.more()" title="Load more">More</button>\n  ',styles:["\n:host(.ng-table-more) {\n  font-family: Roboto,Helvetica Neue,sans-serif;\n  font-size: 12px;\n  background: #fff;\n  color: rgba(0,0,0,.54);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 56px;\n}\n\n:host(.ng-table-more) /deep/ .ng-table-more-button {\n  width: 100%;\n}\n  "],host:{class:"ng-table-more"}}]}],m.ctorParameters=function(){return[]},m.propDecorators={table:[{type:n.Input}],label:[{type:n.Input,args:["labels"]}],ngTable:[{type:n.Input}],rangeVisible:[{type:n.Input}]};var _=function(){function e(){this._rangeVisible=!0,this._label={items_per_page:"Items per page",page:"Page",of_page:"of",items:"Items",of_items:"of"}}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label=Object.assign({},this._label,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngTable",{set:function(e){this.table=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeVisible",{get:function(){return this._rangeVisible},set:function(e){this._rangeVisible=e},enumerable:!0,configurable:!0}),e.prototype.actionRange=function(e){this.table&&(this.table.range=+e.value)},e}();_.decorators=[{type:n.Component,args:[{selector:"ng-table-paginator",template:'\n1<div class="ng-table-paginator-page-size" *ngIf="rangeVisible && !table.empty">\n  <div class="ng-table-paginator-page-size-label">\n    {{label.items_per_page}}\n  </div>\n  <select class="ng-table-paginator-page-size-select" [(ngModel)]="table.range" (change)="actionRange($event)" [disabled]="table.loading">\n    <option *ngFor="let count of table.rangeOptions" value="{{count}}">{{count}}</option>\n  </select>\n</div>\n<div class="ng-table-paginator-page-label" *ngIf="!table.empty">\n  {{label.page}} {{table.page}} {{label.of_page}} {{table.totalPages}} |\n  {{label.items}} <span *ngIf="table.rows.length > 1">{{table.from}} - {{table.to}}</span>\n  <span *ngIf="table.rows.length == 1">{{table.from}}</span>\n  {{label.of_items}} {{table.totalRows}}\n</div>\n<button *ngIf="!table.empty" (click)="table.prev()" [disabled]="!table.hasPrev || table.loading" title="Previous page">⇽</button>\n<button *ngIf="!table.empty" (click)="table.next()" [disabled]="!table.hasNext || table.loading" title="Next page">⇾</button>\n  ',styles:["\n:host(.ng-table-paginator) {\n  font-family: Roboto,Helvetica Neue,sans-serif;\n  font-size: 12px;\n  background: #fff;\n  color: rgba(0,0,0,.54);\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  min-height: 56px;\n  padding: 0 8px;\n}\n\n:host(.ng-table-paginator) /deep/ .ng-table-paginator-page-size {\n  display: flex;\n  align-items: center;\n}\n\n:host(.ng-table-paginator) /deep/ .ng-table-paginator-page-size-label {\n  margin: 0 8px 0 0;\n}\n\n:host(.ng-table-paginator) /deep/ .ng-table-paginator-page-size-select .mat-select-trigger {\n  min-width: 60px;\n  font-size: 12px;\n}\n\n:host(.ng-table-paginator) /deep/ .ng-table-paginator-page-label {\n  margin: 0 32px;\n}\n  "],host:{class:"ng-table-paginator"}}]}],_.ctorParameters=function(){return[]},_.propDecorators={table:[{type:n.Input}],label:[{type:n.Input,args:["labels"]}],ngTable:[{type:n.Input}],rangeVisible:[{type:n.Input}]};var y=function(){function e(){this._range=null,this._rangeOptions=[5,10,20,50],this._params=null,this._loading=!1,this._sourceUpdate=new o.BehaviorSubject(null),this.sourceUpdate=new n.EventEmitter,this.beforeConnect=new n.EventEmitter,this.afterConnect=new n.EventEmitter}return Object.defineProperty(e.prototype,"loading",{get:function(){return this._loading},enumerable:!0,configurable:!0}),e.prototype.getData=function(e){this._loading=!0,this.source(e)},e.prototype.refresh=function(){this._loading||this.getData(this.params)},e.prototype.updateData=function(e){this._loading=!1,this._sourceUpdate.next(e),this.sourceUpdate.emit(new g(this,e))},Object.defineProperty(e.prototype,"connection",{get:function(){return this._sourceUpdate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this._params},set:function(e){var t=null!=this._params;this._params=e,!this._loading&&t&&this.getData(this.params)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._range||10},set:function(e){var t=null!=this._range;this._range=e,!this._loading&&t&&this.getData(this.params)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeOptions",{get:function(){return this._rangeOptions},set:function(e){this._rangeOptions=e},enumerable:!0,configurable:!0}),e}(),P=function(){function e(e,t,n){void 0===t&&(t=0),this._data=e,this._totalRows=t,this._additionalData=n}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalRows",{get:function(){return this._totalRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"additionalData",{get:function(){return this._additionalData},enumerable:!0,configurable:!0}),e.create=function(t,n,r){return new e(t,n,r)},e.singlePage=function(t,n,r){var a=[],o=0,i=t.params;return n.forEach(function(e){o>=i.offset&&o<i.offset+t.range&&a.push(e),o++}),new e(a,n.length,r)},e}(),w=function(){function e(){}return e}();w.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,r.FormsModule],declarations:[c,h,d,b,f,_,m],providers:[],exports:[c,h,d,b,f,_,m]}]}],w.ctorParameters=function(){return[]},e.NgTableModule=w,e.NgTableInitEvent=i,e.NgTableDestroyEvent=s,e.NgTableBeforeConnectEvent=l,e.NgTableAfterConnectEvent=u,e.NgTableRangeEvent=p,e.NgTableSource=y,e.NgTableSourceResult=P,e.NgTable=c,e.NgTableHeaderRow=h,e.NgTableHeaderCell=d,e.NgTableRow=b,e.NgTableCell=f,e.NgTablePaginator=_,Object.defineProperty(e,"__esModule",{value:!0})});